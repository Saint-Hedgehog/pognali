"use strict";var countries=document.querySelector(".step__countries-container"),countriesElements={template:countries.querySelector(".input-countrie--empty").cloneNode(!0),dropdownButtons:countries.querySelectorAll(".input-countrie__dropdown-button")},addButton=document.querySelector(".new-countrie__add-button"),textareas=document.querySelector(".step__plans-container"),textareasElements={template:textareas.querySelector(".step__countrie-plan").cloneNode(!0),all:function(){return textareas.querySelectorAll(".step__countrie-plan")}},dropdown=document.querySelector(".countrie-dropdown"),dropdownElements={closeButton:dropdown.querySelector(".countrie-dropdown__close-button"),countriesList:dropdown.querySelector(".countrie-dropdown__list"),alphabet:dropdown.querySelector(".countrie-dropdown__alphabet")},currentInput={parent:null,input:null,flag:null,closeButton:null},isLonely=function(){0===countries.children.length?addButton.parentNode.classList.add("new-countrie--lonely"):addButton.parentNode.classList.remove("new-countrie--lonely")},openDropdown=function(e,t){t(),dropdown.classList.add("countrie-dropdown--active"),currentInput.parent=e,currentInput.input=e.querySelector(".input-countrie__input"),currentInput.flag=e.querySelector(".input-countrie__flag"),currentInput.closeButton=e.querySelector(".input-countrie__delete-button")},closeDropdown=function(){dropdown.classList.remove("countrie-dropdown--active"),currentInput.parent=null,currentInput.input=null,currentInput.flag=null,currentInput.closeButton=null},addNewCountrie=function(){var e=countriesElements.template.cloneNode(!0);function t(){dropdown.style.left=e.parentNode.parentNode.offsetLeft+e.offsetLeft+"px",dropdown.style.top=e.parentNode.parentNode.offsetTop+e.offsetTop+"px"}e.querySelector(".input-countrie__delete-button").addEventListener("click",function(n){n.preventDefault(),e.remove(),window.removeEventListener("resize",t),isLonely()}),e.querySelector(".input-countrie__dropdown-button").addEventListener("click",function(n){n.preventDefault(),openDropdown(e,t)}),countries.appendChild(e),window.addEventListener("resize",t)},addNewTextarea=function(e,t,n){var r=textareasElements.template.cloneNode(!0),o=r.querySelector("label");return o.setAttribute("for","countrie-plan-"+t),o.textContent=e,o.classList.add("countrie-plan__countrie--"+n),r.addEventListener("input",function(){window.validation.isValidTextarea(r)}),t===textareas.children.length?textareas.appendChild(r):textareas.insertBefore(r,textareas.children[t]),r},initCountrie=function(){countries.innerHTML="",textareas.innerHTML="",addButton.parentNode.classList.add("new-countrie--lonely")};dropdownElements.alphabet.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),e.target.classList.contains("countrie-dropdown__letter")&&(dropdownElements.alphabet.querySelector(".countrie-dropdown__letter--active").classList.remove("countrie-dropdown__letter--active"),e.target.classList.add("countrie-dropdown__letter--active"),dropdownElements.countriesList.querySelector(".countrie-dropdown__item--active").classList.remove("countrie-dropdown__item--active"),dropdownElements.countriesList.children[window.utils.indexOf(e.target.parentNode.parentNode,e.target.parentNode)].classList.add("countrie-dropdown__item--active"))}),countriesElements.dropdownButtons.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),openDropdown(e.parentNode)})}),dropdownElements.closeButton.addEventListener("click",function(e){e.preventDefault(),closeDropdown()}),addButton.addEventListener("click",function(e){e.preventDefault(),addNewCountrie(),isLonely()}),dropdownElements.countriesList.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),e.target.classList.contains("countrie-dropdown__city")){var t=e.target.innerText,n=e.target.getAttribute("data-code"),r=window.utils.indexOf(currentInput.parent.parentNode,currentInput.parent);currentInput.flag.classList.length>1&&currentInput.flag.classList.remove(currentInput.flag.classList[1]),currentInput.input.value=t,currentInput.flag.classList.add("input-countrie__flag--"+n),currentInput.parent.classList.contains("input-countrie--empty")?currentInput.parent.classList.remove("input-countrie--empty"):textareasElements.all()[r].remove();var o=addNewTextarea(t,r,n);dropdown.classList.remove("countrie-dropdown--active"),currentInput.closeButton.addEventListener("click",function(e){e.preventDefault(),o.remove()})}}),initCountrie();var letterForm=document.querySelectorAll(".countrie-dropdown__letter--active");function actLetTabindex(e){e.setAttribute("tabindex","-1")}letterForm.forEach(actLetTabindex);